# React Native Android APK 진단 결과 분석

아래는 보고서에 나온 "실패(FAIL)" 항목별로 **원인 요약 → 기술 배경 →
React Native(Android) 기준 조치안**을 정리한 것입니다.

------------------------------------------------------------------------

## 1) \[업무용\] 루팅 여부 미확인 (FAIL)

**원인**\
- 앱이 루팅/변조 단말 차단(무결성/위·변조 탐지)을 구현하지 않아, 보안 상
민감한 업무앱 요건을 충족하지 못함.

**조치안 (React Native 중심)**\
- Google Play Integrity API(or SafetyNet 대체) 연동, 루팅 지표 점검\
- RN 라이브러리: `react-native-device-info`, 루팅 탐지 네이티브 모듈\
- 탐지 시 로그인/업무 차단 + 서버 로깅\
- 앱 난독화, 디버그/ADB 백업 차단

------------------------------------------------------------------------

## 2) \[업무용\] 화면 캡처 차단 기능 부재 (FAIL)

**원인**\
- 민감 화면에서 스크린샷/최근앱 섬네일 저장을 차단하지 않음.

**조치안 (React Native 중심)**\
- `FLAG_SECURE` 적용\
- RN: `react-native-android-flag-secure` 또는 MainActivity 수정\
- 민감 화면 진입 시 활성화, 종료 시 해제

------------------------------------------------------------------------

## 3) NDK 보안 -- Buffer Overflow 위험 함수 (FAIL)

**원인**\
- so 파일에 `memcpy`, `realpath` 등 위험 함수 존재

**조치안**\
- `memcpy` → `memmove` 등 안전 함수 사용\
- 길이 검증 철저\
- `-D_FORTIFY_SOURCE=2`, `-fstack-protector-strong` 적용\
- RN/NDK 최신 업데이트

------------------------------------------------------------------------

## 4) NDK 보안 -- Format String 취약 함수 (FAIL)

**원인**\
- `fprintf`, `snprintf`, `syslog` 함수 존재 → 사용자 입력 그대로 사용 시
취약

**조치안**\
- 포맷 문자열 상수 고정\
- `-Wformat-security` 옵션 적용\
- RN/NDK 최신화

------------------------------------------------------------------------

## 5) NDK 보안 -- Race Condition (TOCTOU) (FAIL)

**원인**\
- `access()` 사용 → 권한 확인과 사용 간 시차 문제

**조치안**\
- `mkstemp()`, `open(O_CREAT|O_EXCL)` 사용\
- `/data/data/<pkg>` 내부 전용 디렉토리 사용\
- 파일 핸들 재사용, 경로 재검사 금지

------------------------------------------------------------------------

# 개선 우선순위

1**화면보호 + 루팅 탐지**\
2**NDK 코드 점검 및 빌드 보안옵션 적용**\
3**파일 I/O 원자성 확보**\
4**RN/NDK 최신화**

------------------------------------------------------------------------

# 검증 체크리스트

-   루팅 단말 실행 차단 여부\
-   스크린샷/녹화 차단 확인\
-   포맷 문자열 안전성 검증\
-   임시파일 안전 처리 확인
